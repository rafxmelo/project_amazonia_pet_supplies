<h1>Your Shopping Cart</h1>
<table>
  <thead>
    <tr>
      <th>Product</th>
      <th>Quantity</th>
      <th>Price</th>
      <th>Total</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @cart.each do |id, quantity| %>
      <% product = @products.find { |p| p.id == id } %>
      <% if product %>
        <tr>
          <td><%= product.name %></td>
          <td>
            <%= form_with url: update_cart_path(id), method: :post, local: true do %>
              <%= number_field_tag :quantity, quantity, min: 1 %>
              <%= submit_tag "Update" %>
            <% end %>
          </td>
          <td><%= number_to_currency(product.price) %></td>
          <td><%= number_to_currency(product.price * quantity) %></td>
          <td><%= link_to 'Remove', remove_from_cart_path(id), method: :delete %></td>
        </tr>
      <% else %>
        <tr>
          <td colspan="5">Product not found</td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>
<%= link_to 'Continue Shopping', root_path %>
<%= link_to 'Checkout', new_order_path %>
