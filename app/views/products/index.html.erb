<h1>Available Products</h1>

<%= link_to "All Products", products_path %> |
<%= link_to "On Sale", products_path(filter: "on_sale") %> |
<%= link_to "Newly Added", products_path(filter: "newly_added") %> |
<%= link_to "Recently Updated", products_path(filter: "recently_updated") %>

<%= search_form_for @q, url: products_path, method: :get do |f| %>
  <div>
    <%= f.label :name_cont, "Keyword" %>
    <%= f.search_field :name_cont %>
  </div>
  <div>
    <%= f.label :categories_id_eq, "Category" %>
    <%= f.collection_select :categories_id_eq, Category.all, :id, :name, include_blank: "All Categories" %>
  </div>
  <div>
    <%= f.submit "Search" %>
  </div>
<% end %>

<% @products.each do |product| %>
  <%= render partial: "product", locals: { product: product } %>
<% end %>

<%= paginate @products %>
